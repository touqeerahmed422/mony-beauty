{# announcement-bar.twiq
   Announcement bar component for Salla/Twiq themes
   Features:
   - Dashboard settings for: announcement text, background color, text color, text alignment, padding, visibility toggle
   - Does not render when text is empty

   Usage: Place this file where your theme components live and include it in the layout where you want the announcement bar to appear.
#}

<div class="announcement-bar-wrapper" data-component="announcement-bar">
  {% if settings.announcement_text and settings.announcement_text != "" %}
    <div class="announcement-bar"
         role="region"
         aria-label="announcement"
         style="background-color: {{ settings.background_color | default: '#111' }}; color: {{ settings.text_color | default: '#fff' }}; text-align: {{ settings.text_alignment | default: 'center' }}; padding: {{ settings.padding | default: '10px 0' }};">

      <div class="announcement-bar__inner" style="max-width: {{ settings.max_width | default: '1200px' }}; margin: 0 auto; padding-left: 12px; padding-right: 12px;">
        {% if settings.show_icon %}
          <span class="announcement-bar__icon" aria-hidden="true" style="margin-right:8px; vertical-align:middle;">
            {{ settings.icon_svg | raw }}
          </span>
        {% endif %}

        <span class="announcement-bar__text">{{ settings.announcement_text }}</span>

        {% if settings.show_close %}
          <button class="announcement-bar__close" aria-label="Close announcement" type="button" onclick="this.closest('[data-component=announcement-bar]').style.display='none'" style="background:none;border:none;color:inherit;float:right;">
            Ã—
          </button>
        {% endif %}
      </div>
    </div>
  {% endif %}
</div>

<style>
  /* Simple component styles (you can move these to your main CSS) */
  .announcement-bar { font-family: inherit; font-size: 16px; line-height:1.3; }
  .announcement-bar__inner { display:flex; align-items:center; justify-content:center; gap:8px; }
  .announcement-bar__text { display:inline-block; vertical-align:middle; }
  .announcement-bar__icon svg { width:18px; height:18px; display:inline-block; }
  .announcement-bar__close { font-size:20px; line-height:1; cursor:pointer; }

  /* Responsive adjustments */
  @media (max-width: 600px) {
    .announcement-bar { font-size:14px; }
  }
</style>

{#
  Example of a settings schema you can adapt to Salla's dashboard.
  Insert the equivalent in your theme's component registration so the merchant can
  change values from the dashboard.

  (If Salla uses a different schema format, adapt keys accordingly. The important
  keys are the names used above: announcement_text, background_color, text_color,
  text_alignment, padding, show_icon, icon_svg, show_close, max_width.)
#}

<!-- Settings JSON (put this in your section schema or wherever Salla expects it) -->
{
  "name": "Announcement Bar",
  "settings": [
    { "type": "text", "id": "announcement_text", "label": "Announcement Text", "default": "Free shipping on orders over PKR 5,000!" },
    { "type": "color", "id": "background_color", "label": "Background color", "default": "#111111" },
    { "type": "color", "id": "text_color", "label": "Text color", "default": "#ffffff" },
    { "type": "select", "id": "text_alignment", "label": "Text alignment", "options": [ {"value":"left","label":"Left"}, {"value":"center","label":"Center"}, {"value":"right","label":"Right"}], "default": "center" },
    { "type": "text", "id": "padding", "label": "Vertical padding (CSS, e.g. 10px 0)", "default": "10px 0" },
    { "type": "checkbox", "id": "show_icon", "label": "Show icon", "default": true },
    { "type": "textarea", "id": "icon_svg", "label": "Icon SVG (raw)", "default": "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M12 2L2 22h20L12 2z\"/></svg>" },
    { "type": "checkbox", "id": "show_close", "label": "Show close button", "default": true },
    { "type": "text", "id": "max_width", "label": "Max content width", "default": "1200px" }
  ]
}

<!-- End of announcement-bar.twiq -->